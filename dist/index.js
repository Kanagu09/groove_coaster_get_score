!function(){"use strict";const t="Groove_Coaster_score.csv";class r{music_id;song_title;song_artist;skin_name;favorite;ex_flag;score_simple;rate_simple;status_simple;rank_simple;count_simple;score_normal;rate_normal;status_normal;rank_normal;count_normal;score_hard;rate_hard;status_hard;rank_hard;count_hard;score_extra;rate_extra;status_extra;rank_extra;count_extra;constructor(t,r,a){this.music_id=t,this.song_title=r,this.song_artist=a,this.skin_name="",this.favorite="",this.ex_flag="",this.score_simple="",this.rate_simple="",this.status_simple="",this.rank_simple="",this.count_simple="",this.score_normal="",this.rate_normal="",this.status_normal="",this.rank_normal="",this.count_normal="",this.score_hard="",this.rate_hard="",this.status_hard="",this.rank_hard="",this.count_hard="",this.score_extra="",this.rate_extra="",this.status_extra="",this.rank_extra="",this.count_extra=""}}function a(t){switch(t){case 0:return"";case 1:return"o"}}function e(t){switch(t){case 0:return"";case 1:return"o"}}function s(t){return null===t?"":t.score}function n(t){return null===t?"":t.rating}function _(t){return null===t?"":t.play_count}function o(t){return null===t?"":t.perfect>0?"PERFECT":t.full_chain>0?"FULL CHAIN":t.no_miss>0?"NO MISS":t.is_failed_mark?"FAILED":"CLEAR"}function i(t){let r=["","","",""];if(null==t)return r;for(let a of t)null!=a&&(r[a.difficulty]=a.rank);return r}alert("データ集計を開始します。\n時間がかかる場合があります。\n気長にお待ちください。");const l=function(t){let l=[];for(const u of t){const t=new r(u.music_id,u.music_title,u.artist);t.skin_name=u.skin_name,t.favorite=a(u.fav_flg),t.ex_flag=e(u.ex_flag),t.score_simple=s(u.simple_result_data),t.score_normal=s(u.normal_result_data),t.score_hard=s(u.hard_result_data),t.score_extra=s(u.extra_result_data),t.rate_simple=n(u.simple_result_data),t.rate_normal=n(u.normal_result_data),t.rate_hard=n(u.hard_result_data),t.rate_extra=n(u.extra_result_data),t.count_simple=_(u.simple_result_data),t.count_normal=_(u.normal_result_data),t.count_hard=_(u.hard_result_data),t.count_extra=_(u.extra_result_data),t.status_simple=o(u.simple_result_data),t.status_normal=o(u.normal_result_data),t.status_hard=o(u.hard_result_data),t.status_extra=o(u.extra_result_data),t.rank_simple=i(u.user_rank)[0],t.rank_normal=i(u.user_rank)[1],t.rank_hard=i(u.user_rank)[2],t.rank_extra=i(u.user_rank)[3],l.push(t)}return l}(function(){let t=[];try{const r=new XMLHttpRequest;for(let a=0;a<=999;a++){r.open("GET","https://mypage.groovecoaster.jp/sp/json/music_detail.php?music_id="+a,!1),r.send();let e=JSON.parse(r.response).music_detail;null!==e&&t.push(e)}return t}catch(t){const r="Error: データの取得に失敗しました。";throw alert(r),Error(r)}}());!function(r){!function(t){if(0===t.length){const t="Error: 参照データが存在しません。";throw alert(t),Error(t)}}(r),console.info("filename:",t);const a=function(t){const r=Object.keys(t[0]),a=t.map((t=>r.map((r=>t[r]))));let e=[].concat([r],a);console.log(e);let s=function(t){return'"'+(""+t).replace(/"/g,'""')+'"'};return e.map((t=>t.map((t=>s(t))).join(","))).join("\n")}(r);!function(r){const a=new Uint8Array([239,187,191]),e=new Blob([a,r],{type:"text/csv"}),s=(window.URL||window.webkitURL).createObjectURL(e);let n=document.createElement("a");n.download=decodeURI(t),n.href=s,n.type="text/csv",n.click()}(a)}(l)}();
