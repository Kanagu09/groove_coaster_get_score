!function(){"use strict";const t="Groove_Coaster_score.csv";class a{music_id;song_title;song_artist;skin_name;favorite;ex_flag;score_simple;rate_simple;status_simple;rank_simple;play_count_simple;nomiss_count_simple;fullchain_count_simple;perfect_count_simple;score_normal;rate_normal;status_normal;rank_normal;play_count_normal;nomiss_count_normal;fullchain_count_normal;perfect_count_normal;score_hard;rate_hard;status_hard;rank_hard;play_count_hard;nomiss_count_hard;fullchain_count_hard;perfect_count_hard;score_extra;rate_extra;status_extra;rank_extra;play_count_extra;nomiss_count_extra;fullchain_count_extra;perfect_count_extra;constructor(t,a,r){this.music_id=t,this.song_title=a,this.song_artist=r,this.skin_name="",this.favorite="",this.ex_flag="",this.score_simple="",this.rate_simple="",this.status_simple="",this.rank_simple="",this.play_count_simple="",this.nomiss_count_simple="",this.fullchain_count_simple="",this.perfect_count_simple="",this.score_normal="",this.rate_normal="",this.status_normal="",this.rank_normal="",this.play_count_normal="",this.nomiss_count_normal="",this.fullchain_count_normal="",this.perfect_count_normal="",this.score_hard="",this.rate_hard="",this.status_hard="",this.rank_hard="",this.play_count_hard="",this.nomiss_count_hard="",this.fullchain_count_hard="",this.perfect_count_hard="",this.score_extra="",this.rate_extra="",this.status_extra="",this.rank_extra="",this.play_count_extra="",this.nomiss_count_extra="",this.fullchain_count_extra="",this.perfect_count_extra=""}}function r(t){switch(t){case 0:return"";case 1:return"o"}}function e(t){switch(t){case 0:return"";case 1:return"o"}}function n(t){return null===t?"":t.score}function _(t){return null===t?"":t.rating}function s(t){return null===t?"":t.play_count}function l(t){return null===t?"":t.no_miss}function o(t){return null===t?"":t.full_chain}function u(t){return null===t?"":t.perfect}function i(t){return null===t?"":t.perfect>0?"PERFECT":t.full_chain>0?"FULL CHAIN":t.no_miss>0?"NO MISS":t.is_failed_mark?"FAILED":"CLEAR"}function c(t){let a=["","","",""];if(null==t)return a;for(let r of t)null!=r&&(a[r.difficulty]=r.rank);return a}alert("データ集計を開始します。\n時間がかかる場合があります。\n気長にお待ちください。");const m=function(t){let m=[];for(const h of t){const t=new a(h.music_id,h.music_title,h.artist);t.skin_name=h.skin_name,t.favorite=r(h.fav_flg),t.ex_flag=e(h.ex_flag),t.score_simple=n(h.simple_result_data),t.score_normal=n(h.normal_result_data),t.score_hard=n(h.hard_result_data),t.score_extra=n(h.extra_result_data),t.rate_simple=_(h.simple_result_data),t.rate_normal=_(h.normal_result_data),t.rate_hard=_(h.hard_result_data),t.rate_extra=_(h.extra_result_data),t.status_simple=i(h.simple_result_data),t.status_normal=i(h.normal_result_data),t.status_hard=i(h.hard_result_data),t.status_extra=i(h.extra_result_data),t.rank_simple=c(h.user_rank)[0],t.rank_normal=c(h.user_rank)[1],t.rank_hard=c(h.user_rank)[2],t.rank_extra=c(h.user_rank)[3],t.play_count_simple=s(h.simple_result_data),t.play_count_normal=s(h.normal_result_data),t.play_count_hard=s(h.hard_result_data),t.play_count_extra=s(h.extra_result_data),t.nomiss_count_simple=l(h.simple_result_data),t.nomiss_count_normal=l(h.normal_result_data),t.nomiss_count_hard=l(h.hard_result_data),t.nomiss_count_extra=l(h.extra_result_data),t.fullchain_count_simple=o(h.simple_result_data),t.fullchain_count_normal=o(h.normal_result_data),t.fullchain_count_hard=o(h.hard_result_data),t.fullchain_count_extra=o(h.extra_result_data),t.perfect_count_simple=u(h.simple_result_data),t.perfect_count_normal=u(h.normal_result_data),t.perfect_count_hard=u(h.hard_result_data),t.perfect_count_extra=u(h.extra_result_data),m.push(t)}return m}(function(){let t=[];try{const a=new XMLHttpRequest;for(let r=0;r<=999;r++){a.open("GET","https://mypage.groovecoaster.jp/sp/json/music_detail.php?music_id="+r,!1),a.send();let e=JSON.parse(a.response).music_detail;null!==e&&t.push(e)}return t}catch(t){const a="Error: データの取得に失敗しました。";throw alert(a),Error(a)}}());!function(a){!function(t){if(0===t.length){const t="Error: 参照データが存在しません。";throw alert(t),Error(t)}}(a),console.info("filename:",t);const r=function(t){const a=Object.keys(t[0]),r=t.map((t=>a.map((a=>t[a]))));let e=[].concat([a],r);console.log(e);let n=function(t){return'"'+(""+t).replace(/"/g,'""')+'"'};return e.map((t=>t.map((t=>n(t))).join(","))).join("\n")}(a);!function(a){const r=new Uint8Array([239,187,191]),e=new Blob([r,a],{type:"text/csv"}),n=(window.URL||window.webkitURL).createObjectURL(e);let _=document.createElement("a");_.download=decodeURI(t),_.href=n,_.type="text/csv",_.click()}(r)}(m)}();
