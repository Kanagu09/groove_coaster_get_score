!function(){"use strict";const t="Groove_Coaster_score.csv";class a{music_id;song_title;song_artist;skin_name;favorite;ex_flag;score_simple;rate_simple;status_simple;rank_simple;play_count_simple;nomiss_count_simple;fullchain_count_simple;perfect_count_simple;max_chain_simple;adlib_simple;score_normal;rate_normal;status_normal;rank_normal;play_count_normal;nomiss_count_normal;fullchain_count_normal;perfect_count_normal;max_chain_normal;adlib_normal;score_hard;rate_hard;status_hard;rank_hard;play_count_hard;nomiss_count_hard;fullchain_count_hard;perfect_count_hard;max_chain_hard;adlib_hard;score_extra;rate_extra;status_extra;rank_extra;play_count_extra;nomiss_count_extra;fullchain_count_extra;perfect_count_extra;max_chain_extra;adlib_extra;constructor(t,a,r){this.music_id=t,this.song_title=a,this.song_artist=r,this.skin_name="",this.favorite="",this.ex_flag="",this.score_simple="",this.rate_simple="",this.status_simple="",this.rank_simple="",this.play_count_simple="",this.nomiss_count_simple="",this.fullchain_count_simple="",this.perfect_count_simple="",this.max_chain_simple="",this.adlib_simple="",this.score_normal="",this.rate_normal="",this.status_normal="",this.rank_normal="",this.play_count_normal="",this.nomiss_count_normal="",this.fullchain_count_normal="",this.perfect_count_normal="",this.max_chain_normal="",this.adlib_normal="",this.score_hard="",this.rate_hard="",this.status_hard="",this.rank_hard="",this.play_count_hard="",this.nomiss_count_hard="",this.fullchain_count_hard="",this.perfect_count_hard="",this.max_chain_hard="",this.adlib_hard="",this.score_extra="",this.rate_extra="",this.status_extra="",this.rank_extra="",this.play_count_extra="",this.nomiss_count_extra="",this.fullchain_count_extra="",this.perfect_count_extra="",this.max_chain_extra="",this.adlib_extra=""}}function r(t){switch(t){case 0:return"";case 1:return"o"}}function _(t){switch(t){case 0:return"";case 1:return"o"}}function e(t){return null===t?"":t.score}function n(t){return null===t?"":t.rating}function s(t){return null===t?"":t.play_count}function l(t){return null===t?"":t.no_miss}function i(t){return null===t?"":t.full_chain}function o(t){return null===t?"":t.perfect}function u(t){return null===t?"":t.max_chain}function c(t){return null===t?"":t.adlib}function m(t){return null===t?"":t.perfect>0?"PERFECT":t.full_chain>0?"FULL CHAIN":t.no_miss>0?"NO MISS":t.is_failed_mark?"FAILED":"CLEAR"}function h(t){let a=["","","",""];if(null==t)return a;for(let r of t)null!=r&&(a[r.difficulty]=r.rank);return a}alert("データ集計を開始します。\n時間がかかる場合があります。\n気長にお待ちください。");const d=function(t){let d=[];for(const p of t){const t=new a(p.music_id,p.music_title,p.artist);t.skin_name=p.skin_name,t.favorite=r(p.fav_flg),t.ex_flag=_(p.ex_flag),t.score_simple=e(p.simple_result_data),t.score_normal=e(p.normal_result_data),t.score_hard=e(p.hard_result_data),t.score_extra=e(p.extra_result_data),t.rate_simple=n(p.simple_result_data),t.rate_normal=n(p.normal_result_data),t.rate_hard=n(p.hard_result_data),t.rate_extra=n(p.extra_result_data),t.status_simple=m(p.simple_result_data),t.status_normal=m(p.normal_result_data),t.status_hard=m(p.hard_result_data),t.status_extra=m(p.extra_result_data),t.rank_simple=h(p.user_rank)[0],t.rank_normal=h(p.user_rank)[1],t.rank_hard=h(p.user_rank)[2],t.rank_extra=h(p.user_rank)[3],t.play_count_simple=s(p.simple_result_data),t.play_count_normal=s(p.normal_result_data),t.play_count_hard=s(p.hard_result_data),t.play_count_extra=s(p.extra_result_data),t.nomiss_count_simple=l(p.simple_result_data),t.nomiss_count_normal=l(p.normal_result_data),t.nomiss_count_hard=l(p.hard_result_data),t.nomiss_count_extra=l(p.extra_result_data),t.fullchain_count_simple=i(p.simple_result_data),t.fullchain_count_normal=i(p.normal_result_data),t.fullchain_count_hard=i(p.hard_result_data),t.fullchain_count_extra=i(p.extra_result_data),t.perfect_count_simple=o(p.simple_result_data),t.perfect_count_normal=o(p.normal_result_data),t.perfect_count_hard=o(p.hard_result_data),t.perfect_count_extra=o(p.extra_result_data),t.max_chain_simple=u(p.simple_result_data),t.max_chain_normal=u(p.normal_result_data),t.max_chain_hard=u(p.hard_result_data),t.max_chain_extra=u(p.extra_result_data),t.adlib_simple=c(p.simple_result_data),t.adlib_normal=c(p.normal_result_data),t.adlib_hard=c(p.hard_result_data),t.adlib_extra=c(p.extra_result_data),d.push(t)}return d}(function(){let t=[];try{const a=new XMLHttpRequest;for(let r=0;r<=999;r++){a.open("GET","https://mypage.groovecoaster.jp/sp/json/music_detail.php?music_id="+r,!1),a.send();let _=JSON.parse(a.response).music_detail;null!==_&&t.push(_)}return t}catch(t){const a="Error: データの取得に失敗しました。";throw alert(a),Error(a)}}());!function(a){!function(t){if(0===t.length){const t="Error: 参照データが存在しません。";throw alert(t),Error(t)}}(a),console.info("filename:",t);const r=function(t){const a=Object.keys(t[0]),r=t.map((t=>a.map((a=>t[a]))));let _=[].concat([a],r);console.log(_);let e=function(t){return'"'+(""+t).replace(/"/g,'""')+'"'};return _.map((t=>t.map((t=>e(t))).join(","))).join("\n")}(a);!function(a){const r=new Uint8Array([239,187,191]),_=new Blob([r,a],{type:"text/csv"}),e=(window.URL||window.webkitURL).createObjectURL(_);let n=document.createElement("a");n.download=decodeURI(t),n.href=e,n.type="text/csv",n.click()}(r)}(d)}();
