!function(){"use strict";const t="Groove_Coaster_score.csv";class r{music_id;song_title;song_artist;favorite;ex_flag;score_simple;rate_simple;count_simple;status_simple;score_normal;rate_normal;count_normal;status_normal;score_hard;rate_hard;count_hard;status_hard;score_extra;rate_extra;count_extra;status_extra;constructor(t,r,e){this.music_id=t,this.song_title=r,this.song_artist=e,this.favorite="",this.ex_flag="",this.score_simple="",this.rate_simple="",this.count_simple="",this.status_simple="",this.score_normal="",this.rate_normal="",this.count_normal="",this.status_normal="",this.score_hard="",this.rate_hard="",this.count_hard="",this.status_hard="",this.score_extra="",this.rate_extra="",this.count_extra="",this.status_extra=""}}function e(t){switch(t){case 0:return"";case 1:return"o"}}function a(t){switch(t){case 0:return"";case 1:return"o"}}function s(t){return null===t?"":t.score}function n(t){return null===t?"":t.rating}function o(t){return null===t?"":t.play_count}function _(t){return null===t?"":t.perfect>0?"PERFECT":t.full_chain>0?"FULL CHAIN":t.no_miss>0?"NO MISS":t.is_failed_mark?"FAILED":"CLEAR"}alert("データ集計を開始します。\n時間がかかる場合があります。\n気長にお待ちください。");const l=function(t){let l=[];for(const i of t){const t=new r(i.music_id,i.music_title,i.artist);t.favorite=e(i.fav_flg),t.ex_flag=a(i.ex_flag),t.score_simple=s(i.simple_result_data),t.score_normal=s(i.normal_result_data),t.score_hard=s(i.hard_result_data),t.score_extra=s(i.extra_result_data),t.rate_simple=n(i.simple_result_data),t.rate_normal=n(i.normal_result_data),t.rate_hard=n(i.hard_result_data),t.rate_extra=n(i.extra_result_data),t.count_simple=o(i.simple_result_data),t.count_normal=o(i.normal_result_data),t.count_hard=o(i.hard_result_data),t.count_extra=o(i.extra_result_data),t.status_simple=_(i.simple_result_data),t.status_normal=_(i.normal_result_data),t.status_hard=_(i.hard_result_data),t.status_extra=_(i.extra_result_data),l.push(t)}return l}(function(){let t=[];try{const r=new XMLHttpRequest;for(let e=0;e<=999;e++){r.open("GET","https://mypage.groovecoaster.jp/sp/json/music_detail.php?music_id="+e,!1),r.send();let a=JSON.parse(r.response).music_detail;null!==a&&t.push(a)}return t}catch(t){const r="Error: データの取得に失敗しました。";throw alert(r),Error(r)}}());!function(r){!function(t){if(0===t.length){const t="Error: 参照データが存在しません。";throw alert(t),Error(t)}}(r),console.info("filename:",t);const e=function(t){const r=Object.keys(t[0]),e=t.map((t=>r.map((r=>t[r]))));let a=[].concat([r],e);console.log(a);let s=function(t){return'"'+(""+t).replace(/"/g,'""')+'"'};return a.map((t=>t.map((t=>s(t))).join(","))).join("\n")}(r);!function(r){const e=new Uint8Array([239,187,191]),a=new Blob([e,r],{type:"text/csv"}),s=(window.URL||window.webkitURL).createObjectURL(a);let n=document.createElement("a");n.download=decodeURI(t),n.href=s,n.type="text/csv",n.click()}(e)}(l)}();
